<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Cipl Simple API: CtlMgr.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Cidana_Final_ViewVC.PNG"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Cipl Simple API&#160;<span id="projectnumber">2.0</span></div>
   <div id="projectbrief">Cidana Player Simple API Document (Confidential)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">CtlMgr.h</div>  </div>
</div>
<div class="contents">
<a href="_ctl_mgr_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//=============================================================================</span>
<a name="l00002"></a>00002 <span class="comment">//  CIDANA CONFIDENTIAL INFORMATION</span>
<a name="l00003"></a>00003 <span class="comment">//</span>
<a name="l00004"></a>00004 <span class="comment">//      THIS SOURCE CODE IS PROPRIETARY INFORMATION BELONGING TO CIDANA, INC.</span>
<a name="l00005"></a>00005 <span class="comment">//      ANY USE INCLUDING BUT NOT LIMITED TO COPYING OF CODE, CONCEPTS, AND/OR</span>
<a name="l00006"></a>00006 <span class="comment">//      ALGORITHMS IS PROHIBITED EXCEPT WITH EXPRESS WRITTEN PERMISSION BY THE </span>
<a name="l00007"></a>00007 <span class="comment">//      COMPANY.</span>
<a name="l00008"></a>00008 <span class="comment">//</span>
<a name="l00009"></a>00009 <span class="comment">//      THIS CODE AND INFORMATION IS PROVIDED &quot;AS IS&quot; WITHOUT WARRANTY OF ANY</span>
<a name="l00010"></a>00010 <span class="comment">//      KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE</span>
<a name="l00011"></a>00011 <span class="comment">//      IMPLIED WARRANTIES OF MERCHANTABILITY AND/OR FITNESS FOR A PARTICULAR</span>
<a name="l00012"></a>00012 <span class="comment">//      PURPOSE.</span>
<a name="l00013"></a>00013 <span class="comment">//</span>
<a name="l00014"></a>00014 <span class="comment">//      Copyright (c) 2010  Cidana, Inc.  All Rights Reserved.</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">//-----------------------------------------------------------------------------</span>
<a name="l00017"></a>00017 <span class="comment">//</span>
<a name="l00018"></a>00018 <span class="comment">// This file is furnished as part of the Cidana Playback SDK. </span>
<a name="l00019"></a>00019 <span class="comment">// Usage of this file, code, concepts, and/or algorithms is prohibited</span>
<a name="l00020"></a>00020 <span class="comment">// except under the terms of the Software Licensing Agreement with Cidana.</span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#ifndef _CTLMGR_H_</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span><span class="preprocessor">#define _CTLMGR_H_</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="_mgr_utils_8h.html">MgrUtils.h</a>&quot;</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="keyword">struct </span><a class="code" href="struct_i_cipl_nav_mgr.html">ICiplNavMgr</a>;
<a name="l00029"></a>00029 <span class="keyword">struct </span><a class="code" href="struct_i_cipl_tun_mgr.html">ICiplTunMgr</a>;
<a name="l00030"></a>00030 <span class="keyword">struct </span><a class="code" href="struct_i_cipl_dev_mgr.html">ICiplDevMgr</a>;
<a name="l00031"></a>00031 <span class="keyword">struct </span><a class="code" href="struct_i_cipl_ply_mgr.html">ICiplPlyMgr</a>;
<a name="l00032"></a>00032 
<a name="l00033"></a><a class="code" href="struct_c_i_p_l___notify_item.html">00033</a> <span class="keyword">struct </span><a class="code" href="struct_c_i_p_l___notify_item.html">CIPL_NotifyItem</a>
<a name="l00034"></a>00034 {
<a name="l00035"></a><a class="code" href="struct_c_i_p_l___notify_item.html#ab3d97bd31bb452ffe31ab2a9a51108a6">00035</a>         <a class="code" href="_cipl_mgr_8h.html#abd45628da21f1515bdebb16afe28c9f4">LPFN_CiplMgrNotifyCallback</a> <a class="code" href="struct_c_i_p_l___notify_item.html#ab3d97bd31bb452ffe31ab2a9a51108a6">pNotifyCallback</a>;
<a name="l00036"></a><a class="code" href="struct_c_i_p_l___notify_item.html#a748ec4b7bfe7aa93167ae1ae8c9ace4c">00036</a>         LPVOID <a class="code" href="struct_c_i_p_l___notify_item.html#a748ec4b7bfe7aa93167ae1ae8c9ace4c">pNotifyContext</a>;
<a name="l00037"></a>00037 };
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="keyword">class </span><a class="code" href="class_c_ctl_mgr.html">CCtlMgr</a>;
<a name="l00040"></a>00040 
<a name="l00041"></a><a class="code" href="struct_c_i_p_l___session_item.html">00041</a> <span class="keyword">struct </span><a class="code" href="struct_c_i_p_l___session_item.html">CIPL_SessionItem</a>
<a name="l00042"></a>00042 {
<a name="l00043"></a><a class="code" href="struct_c_i_p_l___session_item.html#ad4b131feb75f6ebd270929295678d79a">00043</a>         <a class="code" href="struct_c_i_p_l___session_item.html#ad4b131feb75f6ebd270929295678d79a">CIPL_SessionItem</a>(<a class="code" href="class_c_ctl_mgr.html">CCtlMgr</a> *pMgr)
<a name="l00044"></a>00044         {
<a name="l00045"></a>00045                 <a class="code" href="struct_c_i_p_l___session_item.html#a27d2d7985cdbc837e89550af38687d56">m_szSession</a> = NULL;
<a name="l00046"></a>00046                 <a class="code" href="struct_c_i_p_l___session_item.html#a7b831265177a0b3845132c66006bd9c0">m_szWindowName</a> = NULL;
<a name="l00047"></a>00047                 <a class="code" href="struct_c_i_p_l___session_item.html#a200d02df6f4b5ec79e9a3667907415ff">m_hThread</a> = NULL;
<a name="l00048"></a>00048                 <a class="code" href="struct_c_i_p_l___session_item.html#a523c2922683325d1b4762a9103c72d54">m_pTunerMgr</a> = <a class="code" href="_cipl_mgr_ext_8h.html#a14a6e7f2c5948cada0ed6d165dd4184a">CreateCiplTunMgr</a>();
<a name="l00049"></a>00049                 <a class="code" href="struct_c_i_p_l___session_item.html#aa05e78da76cdb128c2af3998a826e6f7">m_pPlayerMgr</a> = <a class="code" href="_cipl_mgr_ext_8h.html#a14a585b385f8cad5ab53b6dfc9bfa0dc">CreateCiplPlyMgr</a>();
<a name="l00050"></a>00050                 <a class="code" href="struct_c_i_p_l___session_item.html#ad342533a11075cb931b0affc58796176">m_pCtlMgr</a> = pMgr;
<a name="l00051"></a>00051                 memset(&amp;<a class="code" href="struct_c_i_p_l___session_item.html#a7b8fc2dfd2e0e440ac025674af86c8dd">m_Wnd</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_c_i_p_l___session_item.html#a7b8fc2dfd2e0e440ac025674af86c8dd">m_Wnd</a>));
<a name="l00052"></a>00052                 memset(&amp;<a class="code" href="struct_c_i_p_l___session_item.html#a364ac669e3236241768a4f3b05d55554">m_WndExt</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_c_i_p_l___session_item.html#a364ac669e3236241768a4f3b05d55554">m_WndExt</a>));
<a name="l00053"></a>00053         }
<a name="l00054"></a><a class="code" href="struct_c_i_p_l___session_item.html#a5d28d1719da3d98db1410380194cd4d9">00054</a>         HRESULT <a class="code" href="struct_c_i_p_l___session_item.html#a5d28d1719da3d98db1410380194cd4d9">Open</a>(<span class="keyword">const</span> TCHAR *szSession, ICiplMediaPlayer *pMediaPlayer)
<a name="l00055"></a>00055         {
<a name="l00056"></a>00056                 HRESULT hr;
<a name="l00057"></a>00057 
<a name="l00058"></a>00058                 <span class="keywordflow">if</span>(<a class="code" href="struct_c_i_p_l___session_item.html#a523c2922683325d1b4762a9103c72d54">m_pTunerMgr</a>==0 || <a class="code" href="struct_c_i_p_l___session_item.html#aa05e78da76cdb128c2af3998a826e6f7">m_pPlayerMgr</a>==0)
<a name="l00059"></a>00059                         <span class="keywordflow">return</span> E_FAIL;
<a name="l00060"></a>00060                 <span class="keywordflow">if</span>(pMediaPlayer==0)
<a name="l00061"></a>00061                         <span class="keywordflow">return</span> E_INVALIDARG;
<a name="l00062"></a>00062                 <span class="keywordflow">if</span>(szSession)
<a name="l00063"></a>00063                 {
<a name="l00064"></a>00064                         <span class="keywordtype">int</span> len = (int) _tcslen(szSession)+1;
<a name="l00065"></a>00065 
<a name="l00066"></a>00066                         <a class="code" href="struct_c_i_p_l___session_item.html#a27d2d7985cdbc837e89550af38687d56">m_szSession</a> = <span class="keyword">new</span> TCHAR[len];
<a name="l00067"></a>00067                         _tcscpy(<a class="code" href="struct_c_i_p_l___session_item.html#a27d2d7985cdbc837e89550af38687d56">m_szSession</a>,szSession);
<a name="l00068"></a>00068                 }
<a name="l00069"></a>00069                 hr = <a class="code" href="struct_c_i_p_l___session_item.html#aa05e78da76cdb128c2af3998a826e6f7">m_pPlayerMgr</a>-&gt;<a class="code" href="struct_i_cipl_ply_mgr.html#a6b6d11f2e229d3d8e17f130f6c472eb4">Open</a>(pMediaPlayer, <span class="keyword">this</span>);
<a name="l00070"></a>00070                 <span class="keywordflow">if</span>(FAILED(hr))
<a name="l00071"></a>00071                 {
<a name="l00072"></a>00072                         <a class="code" href="struct_c_i_p_l___session_item.html#a2db118e4a3ed2648e82b108ec6aa0109">Close</a>();
<a name="l00073"></a>00073                         <span class="keywordflow">return</span> hr;
<a name="l00074"></a>00074                 }
<a name="l00075"></a>00075                 <span class="keywordflow">return</span> S_OK;
<a name="l00076"></a>00076         }
<a name="l00077"></a><a class="code" href="struct_c_i_p_l___session_item.html#a2db118e4a3ed2648e82b108ec6aa0109">00077</a>         HRESULT <a class="code" href="struct_c_i_p_l___session_item.html#a2db118e4a3ed2648e82b108ec6aa0109">Close</a>()
<a name="l00078"></a>00078         {
<a name="l00079"></a>00079 <span class="preprocessor">#if !WINAPI_FAMILY_PARTITION(!WINAPI_PARTITION_DESKTOP)</span>
<a name="l00080"></a>00080 <span class="preprocessor"></span>                <span class="keywordflow">if</span> (<a class="code" href="struct_c_i_p_l___session_item.html#a200d02df6f4b5ec79e9a3667907415ff">m_hThread</a>)
<a name="l00081"></a>00081                 {
<a name="l00082"></a>00082                         SendMessage(<a class="code" href="struct_c_i_p_l___session_item.html#a7b8fc2dfd2e0e440ac025674af86c8dd">m_Wnd</a>.<a class="code" href="struct_c_i_p_l___window_item.html#abc884372f6e4e84ce25cb900fa5652c0">m_hWnd</a>,WM_CLOSE,0,0); <span class="comment">// destroy window</span>
<a name="l00083"></a>00083                         WaitForSingleObject(<a class="code" href="struct_c_i_p_l___session_item.html#a200d02df6f4b5ec79e9a3667907415ff">m_hThread</a>,INFINITE);
<a name="l00084"></a>00084                         <a class="code" href="struct_c_i_p_l___session_item.html#a200d02df6f4b5ec79e9a3667907415ff">m_hThread</a> = NULL;
<a name="l00085"></a>00085                         <a class="code" href="struct_c_i_p_l___session_item.html#a7b8fc2dfd2e0e440ac025674af86c8dd">m_Wnd</a>.<a class="code" href="struct_c_i_p_l___window_item.html#abc884372f6e4e84ce25cb900fa5652c0">m_hWnd</a> = NULL;
<a name="l00086"></a>00086                 }
<a name="l00087"></a>00087 <span class="preprocessor">#endif</span>
<a name="l00088"></a>00088 <span class="preprocessor"></span>                <span class="keywordflow">if</span>(<a class="code" href="struct_c_i_p_l___session_item.html#a523c2922683325d1b4762a9103c72d54">m_pTunerMgr</a>)
<a name="l00089"></a>00089                         <a class="code" href="struct_c_i_p_l___session_item.html#a523c2922683325d1b4762a9103c72d54">m_pTunerMgr</a>-&gt;<a class="code" href="struct_i_cipl_tun_mgr.html#ae94c238b38b2a7331443dfd8f3c0cb14">Close</a>();
<a name="l00090"></a>00090                 <span class="keywordflow">if</span>(<a class="code" href="struct_c_i_p_l___session_item.html#aa05e78da76cdb128c2af3998a826e6f7">m_pPlayerMgr</a>)
<a name="l00091"></a>00091                         <a class="code" href="struct_c_i_p_l___session_item.html#aa05e78da76cdb128c2af3998a826e6f7">m_pPlayerMgr</a>-&gt;<a class="code" href="struct_i_cipl_ply_mgr.html#a7f55d1c7ecb25bf2b27cb1cefd755a33">Close</a>();
<a name="l00092"></a>00092                 <span class="keywordflow">if</span>(<a class="code" href="struct_c_i_p_l___session_item.html#a27d2d7985cdbc837e89550af38687d56">m_szSession</a>)
<a name="l00093"></a>00093                 {
<a name="l00094"></a>00094                         <span class="keyword">delete</span>[] <a class="code" href="struct_c_i_p_l___session_item.html#a27d2d7985cdbc837e89550af38687d56">m_szSession</a>;
<a name="l00095"></a>00095                         <a class="code" href="struct_c_i_p_l___session_item.html#a27d2d7985cdbc837e89550af38687d56">m_szSession</a> = NULL;
<a name="l00096"></a>00096                 }
<a name="l00097"></a>00097                 <span class="keywordflow">if</span>(<a class="code" href="struct_c_i_p_l___session_item.html#a7b831265177a0b3845132c66006bd9c0">m_szWindowName</a>)
<a name="l00098"></a>00098                 {
<a name="l00099"></a>00099                         <span class="keyword">delete</span>[] <a class="code" href="struct_c_i_p_l___session_item.html#a7b831265177a0b3845132c66006bd9c0">m_szWindowName</a>;
<a name="l00100"></a>00100                         <a class="code" href="struct_c_i_p_l___session_item.html#a7b831265177a0b3845132c66006bd9c0">m_szWindowName</a> = NULL;
<a name="l00101"></a>00101                 }
<a name="l00102"></a>00102                 memset(&amp;<a class="code" href="struct_c_i_p_l___session_item.html#a364ac669e3236241768a4f3b05d55554">m_WndExt</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_c_i_p_l___session_item.html#a364ac669e3236241768a4f3b05d55554">m_WndExt</a>));
<a name="l00103"></a>00103                 <a class="code" href="struct_c_i_p_l___session_item.html#ad342533a11075cb931b0affc58796176">m_pCtlMgr</a> = NULL;
<a name="l00104"></a>00104                 <span class="keywordflow">return</span> S_OK;
<a name="l00105"></a>00105         }
<a name="l00106"></a><a class="code" href="struct_c_i_p_l___session_item.html#a8d00e5ac21d7293c374bcbe2c4bb48a1">00106</a>         <a class="code" href="struct_c_i_p_l___session_item.html#a8d00e5ac21d7293c374bcbe2c4bb48a1">~CIPL_SessionItem</a>()
<a name="l00107"></a>00107         {
<a name="l00108"></a>00108                 <span class="keywordflow">if</span>(<a class="code" href="struct_c_i_p_l___session_item.html#a523c2922683325d1b4762a9103c72d54">m_pTunerMgr</a>)
<a name="l00109"></a>00109                 {
<a name="l00110"></a>00110                         <a class="code" href="struct_c_i_p_l___session_item.html#a523c2922683325d1b4762a9103c72d54">m_pTunerMgr</a>-&gt;Release();
<a name="l00111"></a>00111                         <a class="code" href="struct_c_i_p_l___session_item.html#a523c2922683325d1b4762a9103c72d54">m_pTunerMgr</a> = NULL;
<a name="l00112"></a>00112                 }
<a name="l00113"></a>00113                 <span class="keywordflow">if</span>(<a class="code" href="struct_c_i_p_l___session_item.html#aa05e78da76cdb128c2af3998a826e6f7">m_pPlayerMgr</a>)
<a name="l00114"></a>00114                 {
<a name="l00115"></a>00115                         <a class="code" href="struct_c_i_p_l___session_item.html#aa05e78da76cdb128c2af3998a826e6f7">m_pPlayerMgr</a>-&gt;Release();
<a name="l00116"></a>00116                         <a class="code" href="struct_c_i_p_l___session_item.html#aa05e78da76cdb128c2af3998a826e6f7">m_pPlayerMgr</a> = NULL;
<a name="l00117"></a>00117                 }
<a name="l00118"></a>00118         }
<a name="l00119"></a>00119 
<a name="l00120"></a><a class="code" href="struct_c_i_p_l___session_item.html#a27d2d7985cdbc837e89550af38687d56">00120</a>         TCHAR *<a class="code" href="struct_c_i_p_l___session_item.html#a27d2d7985cdbc837e89550af38687d56">m_szSession</a>;
<a name="l00121"></a><a class="code" href="struct_c_i_p_l___session_item.html#a7b831265177a0b3845132c66006bd9c0">00121</a>         TCHAR *<a class="code" href="struct_c_i_p_l___session_item.html#a7b831265177a0b3845132c66006bd9c0">m_szWindowName</a>;
<a name="l00122"></a><a class="code" href="struct_c_i_p_l___session_item.html#a200d02df6f4b5ec79e9a3667907415ff">00122</a>         HANDLE <a class="code" href="struct_c_i_p_l___session_item.html#a200d02df6f4b5ec79e9a3667907415ff">m_hThread</a>;
<a name="l00123"></a><a class="code" href="struct_c_i_p_l___session_item.html#a364ac669e3236241768a4f3b05d55554">00123</a>         <a class="code" href="struct_c_i_p_l___window_item.html">CIPL_WindowItem</a> <a class="code" href="struct_c_i_p_l___session_item.html#a364ac669e3236241768a4f3b05d55554">m_WndExt</a>;
<a name="l00124"></a><a class="code" href="struct_c_i_p_l___session_item.html#a7b8fc2dfd2e0e440ac025674af86c8dd">00124</a>         <a class="code" href="struct_c_i_p_l___window_item.html">CIPL_WindowItem</a> <a class="code" href="struct_c_i_p_l___session_item.html#a7b8fc2dfd2e0e440ac025674af86c8dd">m_Wnd</a>;
<a name="l00125"></a><a class="code" href="struct_c_i_p_l___session_item.html#a523c2922683325d1b4762a9103c72d54">00125</a>         <a class="code" href="struct_i_cipl_tun_mgr.html">ICiplTunMgr</a> *<a class="code" href="struct_c_i_p_l___session_item.html#a523c2922683325d1b4762a9103c72d54">m_pTunerMgr</a>;
<a name="l00126"></a><a class="code" href="struct_c_i_p_l___session_item.html#aa05e78da76cdb128c2af3998a826e6f7">00126</a>         <a class="code" href="struct_i_cipl_ply_mgr.html">ICiplPlyMgr</a> *<a class="code" href="struct_c_i_p_l___session_item.html#aa05e78da76cdb128c2af3998a826e6f7">m_pPlayerMgr</a>;
<a name="l00127"></a><a class="code" href="struct_c_i_p_l___session_item.html#ad342533a11075cb931b0affc58796176">00127</a>         <a class="code" href="class_c_ctl_mgr.html">CCtlMgr</a> *<a class="code" href="struct_c_i_p_l___session_item.html#ad342533a11075cb931b0affc58796176">m_pCtlMgr</a>;
<a name="l00128"></a>00128 };
<a name="l00129"></a>00129 
<a name="l00130"></a>00130 <span class="preprocessor">#if defined _UNICODE || defined UNICODE </span>
<a name="l00131"></a>00131 <span class="preprocessor"></span><span class="preprocessor">#define  TSTRING std::wstring </span>
<a name="l00132"></a>00132 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00133"></a><a class="code" href="_ctl_mgr_8h.html#a71d464164c73300977ffb80b82691d77">00133</a> <span class="preprocessor"></span><span class="preprocessor">#define TSTRING std::string </span>
<a name="l00134"></a>00134 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00135"></a>00135 <span class="preprocessor"></span>
<a name="l00136"></a><a class="code" href="_ctl_mgr_8h.html#a8492f7115dbbb541387bbdc243d84a43">00136</a> <span class="keyword">typedef</span> std::list&lt;CIPL_SessionItem *&gt; <a class="code" href="_ctl_mgr_8h.html#a8492f7115dbbb541387bbdc243d84a43">SessionList</a>;
<a name="l00137"></a><a class="code" href="_ctl_mgr_8h.html#a0bb2d3d74e98715e05dd2c3f192772c4">00137</a> <span class="keyword">typedef</span> std::map&lt;TSTRING,TSTRING&gt; <a class="code" href="_ctl_mgr_8h.html#a0bb2d3d74e98715e05dd2c3f192772c4">EnvMap</a>;
<a name="l00138"></a>00138 
<a name="l00139"></a><a class="code" href="class_c_ctl_mgr.html">00139</a> <span class="keyword">class </span><a class="code" href="class_c_ctl_mgr.html">CCtlMgr</a> : <span class="keyword">public</span> <a class="code" href="class_c_base_mgr.html">CBaseMgr</a>, <span class="keyword">public</span> <a class="code" href="struct_i_cipl_ctl_mgr.html">ICiplCtlMgr</a>
<a name="l00140"></a>00140 {
<a name="l00141"></a>00141 <span class="keyword">public</span>:
<a name="l00142"></a>00142         <a class="code" href="class_c_ctl_mgr.html#abd6cbd2e4f54cce267387588e964faa6">CCtlMgr</a>();
<a name="l00143"></a>00143         <span class="keyword">virtual</span> <a class="code" href="class_c_ctl_mgr.html#a12ed4df658e8ddbfc6a0a5d9311ee881">~CCtlMgr</a>();
<a name="l00144"></a>00144         <a class="code" href="_mc_com_8h.html#a7fd6b0a81be665f6112bae83cdec3842">DECLARE_IUNKNOWN</a>;
<a name="l00145"></a>00145         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#ae115beb0fd04a02fbfc147f12e85fba3">NonDelegatingQueryInterface</a>)(REFIID riid, LPVOID *ppvObj);
<a name="l00146"></a>00146         <span class="comment">// ICiplMediaEventSink</span>
<a name="l00147"></a>00147         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#a5f519dcccb8e6f453e17e3d9181cd72d">Notify</a>)(<a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> LPVOID pSinkContext, <a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> LONG lEventCode, <a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> ULONG_PTR pulEventParam1, <a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> ULONG_PTR pulEventParam2);
<a name="l00148"></a>00148         <span class="comment">// ICiplCtlMgr</span>
<a name="l00149"></a>00149         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#a8c8b73001a5585c7ba71811af66e230b">GetMgrEnv</a>)(<a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <span class="keyword">const</span> TCHAR *szName, <a class="code" href="ci__ctrl__type_8h.html#aec78e7a9e90a406a56f859ee456e8eae">OUT</a> TCHAR *szReturn, UINT ccReturn, <a class="code" href="ci__ctrl__type_8h.html#aec78e7a9e90a406a56f859ee456e8eae">OUT</a> UINT *pccFilled);
<a name="l00150"></a>00150         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#a69203d2a6b84c83148fd77532012f5d2">SetMgrEnv</a>)(<a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <span class="keyword">const</span> TCHAR *szName, <a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <span class="keyword">const</span> TCHAR *szData);
<a name="l00151"></a>00151         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#a8fa3c805ba87e4abfde73a18948b903c">Open</a>)(DWORD dwFlags, TCHAR tcEscape);
<a name="l00152"></a>00152         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#af85a4bde0f031a2560dce9ce93c82a0d">Close</a>)();
<a name="l00153"></a>00153         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#a15df9242a4ca7622a1d076611a2d6d5a">CreateObject</a>)(DWORD dwType, <a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <span class="keyword">const</span> TCHAR *szName, DWORD dwFlags);
<a name="l00154"></a>00154         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#a8c2eb33222bd608dbe171a819b00e77f">DestroyObject</a>)(DWORD dwType, <a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <span class="keyword">const</span> TCHAR *szName);
<a name="l00155"></a>00155         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#a93c4784ca523a6f7f7085e02f8e453ea">SelectObject</a>)(<a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <span class="keyword">const</span> TCHAR *szSession, DWORD dwType, <a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <span class="keyword">const</span> TCHAR *szName);
<a name="l00156"></a>00156         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#a7469776d11827903bcf03c4aae45d5ef">SelectExternalObject</a>)(<a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <span class="keyword">const</span> TCHAR *szSession, DWORD dwType, <a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> LPVOID pObject);
<a name="l00157"></a>00157         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#aacff9ab80e2e2aaef0a192eb554b236f">ExecuteImmediateCmdString</a>)(<a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <span class="keyword">const</span> TCHAR *szSession, <a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <span class="keyword">const</span> TCHAR *szCommand, <a class="code" href="ci__ctrl__type_8h.html#aec78e7a9e90a406a56f859ee456e8eae">OUT</a> TCHAR *szReturn, UINT ccReturn, <a class="code" href="ci__ctrl__type_8h.html#aec78e7a9e90a406a56f859ee456e8eae">OUT</a> UINT *pccFilled);
<a name="l00158"></a>00158         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#ab2507090eb9a1d08db8906e1cf3ebcef">ExecuteImmediateCmdList</a>)(<a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <span class="keyword">const</span> TCHAR *szSession, INT argc, <a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <span class="keyword">const</span> TCHAR *<span class="keyword">const</span> *argv, <a class="code" href="ci__ctrl__type_8h.html#aec78e7a9e90a406a56f859ee456e8eae">OUT</a> TCHAR *szReturn, UINT ccReturn, <a class="code" href="ci__ctrl__type_8h.html#aec78e7a9e90a406a56f859ee456e8eae">OUT</a> UINT *pccFilled);
<a name="l00159"></a>00159         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#ab3b805093fe4fbeb53e75d4d3db91336">RegisterConsole</a>)(<a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> LPVOID pConsoleContext, <a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="code" href="_cipl_mgr_8h.html#aafc08f5f0f05ec26589e929f6b9dd729">LPFN_CiplMgrConsoleCallback</a> pConsoleCallback);
<a name="l00160"></a>00160         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#a1257c13371009bdf8ff03b07d233d9e0">UnregisterConsole</a>)(<a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> LPVOID pConsoleContext, <a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="code" href="_cipl_mgr_8h.html#aafc08f5f0f05ec26589e929f6b9dd729">LPFN_CiplMgrConsoleCallback</a> pConsoleCallback);
<a name="l00161"></a>00161         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#a3acf7e1f6dde88767f6a01cb08e8fe47">SetEscape</a>)(TCHAR tcEscape);
<a name="l00162"></a>00162         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#abb0efaa2fd148dd8f002273bfffddece">RegisterNotify</a>)(<a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> LPVOID pNotifyContext, <a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="code" href="_cipl_mgr_8h.html#abd45628da21f1515bdebb16afe28c9f4">LPFN_CiplMgrNotifyCallback</a> pNotifyCallback);
<a name="l00163"></a>00163         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#a03da186f2a4bdf48288fb72abfcd4801">UnregisterNotify</a>)(<a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> LPVOID pNotifyContext, <a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="code" href="_cipl_mgr_8h.html#abd45628da21f1515bdebb16afe28c9f4">LPFN_CiplMgrNotifyCallback</a> pNotifyCallback);
<a name="l00164"></a>00164 
<a name="l00165"></a>00165 <span class="keyword">protected</span>:
<a name="l00166"></a>00166         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#a73917572662ccca3aa6435918f2eef63">ExecuteImmediateFormat</a>)(<span class="keyword">const</span> TCHAR *szSession, TCHAR *szReturn, UINT ccReturn, UINT *pccFilled, <span class="keyword">const</span> TCHAR *szFormat, ...);
<a name="l00167"></a>00167         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#a446def172a0769b8fcfa11d7debc34ec">ExecuteImmediateInternal</a>)(<span class="keyword">const</span> TCHAR *szSession, INT argc, <span class="keyword">const</span> TCHAR *<span class="keyword">const</span> *argv, TCHAR *szReturn, UINT ccReturn, UINT *pccFilled);
<a name="l00168"></a>00168         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#ac287b619ca11819c1c223ab7892c4589">OpenDeviceByNumber</a>)(<a class="code" href="struct_c_i_p_l___session_item.html">CIPL_SessionItem</a> *pSession, LONG lDevice);
<a name="l00169"></a>00169         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#a4ba1bc9f70f531f098e28b209c3968ba">OpenDeviceByFile</a>)(<a class="code" href="struct_c_i_p_l___session_item.html">CIPL_SessionItem</a> *pSession, <span class="keyword">const</span> TCHAR *szFilename);
<a name="l00170"></a>00170         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#a58630f00062fbcc2ba90e4d11f9ab7c9">OpenDeviceByURL</a>)(<a class="code" href="struct_c_i_p_l___session_item.html">CIPL_SessionItem</a> *pSession, <span class="keyword">const</span> TCHAR *szURL);
<a name="l00171"></a>00171         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#a1b77a522394ca9a2b537d8a40e4b3ea2">OpenDeviceByContext</a>)(<a class="code" href="struct_c_i_p_l___session_item.html">CIPL_SessionItem</a> *pSession, ICiplSourceContext *pSource, <span class="keyword">const</span> TCHAR *szFilename);
<a name="l00172"></a>00172         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#aa1150cc6844231786ee90ecbabc14154">CloseDevice</a>)(<a class="code" href="struct_c_i_p_l___session_item.html">CIPL_SessionItem</a> *pSession);
<a name="l00173"></a>00173         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#aec442a905707c3507aef5c0e9e70c525">CreateSession</a>)(<span class="keyword">const</span> TCHAR *szSession, DWORD dwFlags);
<a name="l00174"></a>00174         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#a2fb441dc217f1f2e75b636668e1866d5">DestroySession</a>)(<span class="keyword">const</span> TCHAR *szSession);
<a name="l00175"></a>00175         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#aea665516c98f16d6a15f488a3c57f982">SelectSession</a>)(<span class="keyword">const</span> TCHAR *szDefaultSession);
<a name="l00176"></a>00176         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#a3a4eb26d5da9f42fd94bfae2e6bede19">ShowSession</a>)(TCHAR *szReturn, UINT ccReturn, UINT *pccFilled);
<a name="l00177"></a>00177         STDMETHOD_(<a class="code" href="struct_c_i_p_l___session_item.html">CIPL_SessionItem</a> *,<a class="code" href="class_c_ctl_mgr.html#a7215de55ce99bc4ffc4ce629e8995989">GetSessionItem</a>)(<span class="keyword">const</span> TCHAR *szSession);
<a name="l00178"></a>00178         STDMETHOD(<a class="code" href="class_c_ctl_mgr.html#a5f3c7ebb4946b97cdbe2989da69cc2bb">NotifyEventList</a>)(<a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> LONG lEventCode,<a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> ULONG_PTR pulEventParam1, <a class="code" href="ci__ctrl__type_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> ULONG_PTR pulEventParam2,
<a name="l00179"></a>00179                 <span class="keyword">const</span> TCHAR *szEventSession, <span class="keyword">const</span> TCHAR *szEventName, <span class="keyword">const</span> TCHAR *szEventReturn);
<a name="l00180"></a>00180         STDMETHOD_(DWORD,<a class="code" href="class_c_ctl_mgr.html#aca1de6abbd7327668313f98b94e1e864">Thread</a>)(<a class="code" href="struct_c_i_p_l___session_item.html">CIPL_SessionItem</a> *pSession);
<a name="l00181"></a>00181         <span class="keyword">static</span> DWORD WINAPI <a class="code" href="class_c_ctl_mgr.html#ae28d9d42fd114fb812cd3a8b07cb13f3">Thread_Ext</a>(LPVOID lpParameter);
<a name="l00182"></a><a class="code" href="class_c_ctl_mgr.html#a464dee490ba1520558f2329dbc85d90c">00182</a>         <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="class_c_ctl_mgr.html#a464dee490ba1520558f2329dbc85d90c">sessioncmp</a>(<span class="keyword">const</span> TCHAR *a, <span class="keyword">const</span> TCHAR *b)
<a name="l00183"></a>00183         {
<a name="l00184"></a>00184                 <span class="keywordflow">if</span>(a==NULL)
<a name="l00185"></a>00185                 {
<a name="l00186"></a>00186                         <span class="keywordflow">if</span>(b==NULL)
<a name="l00187"></a>00187                                 <span class="keywordflow">return</span> 0;
<a name="l00188"></a>00188                         <span class="keywordflow">return</span> -1;
<a name="l00189"></a>00189                 }
<a name="l00190"></a>00190                 <span class="keywordflow">if</span>(b==NULL)
<a name="l00191"></a>00191                         <span class="keywordflow">return</span> 1;
<a name="l00192"></a>00192                 <span class="keywordflow">return</span> _tcscmp(a,b);
<a name="l00193"></a>00193         }
<a name="l00194"></a>00194 
<a name="l00195"></a><a class="code" href="class_c_ctl_mgr.html#a08c43527145cadf4b2685fab44760ee8">00195</a>         <a class="code" href="struct_i_cipl_nav_mgr.html">ICiplNavMgr</a> *<a class="code" href="class_c_ctl_mgr.html#a08c43527145cadf4b2685fab44760ee8">m_pNavMgr</a>;
<a name="l00196"></a><a class="code" href="class_c_ctl_mgr.html#a9f843162b932009e3271ccda0db98727">00196</a>         <a class="code" href="struct_i_cipl_dev_mgr.html">ICiplDevMgr</a> *<a class="code" href="class_c_ctl_mgr.html#a9f843162b932009e3271ccda0db98727">m_pDeviceMgr</a>;
<a name="l00197"></a><a class="code" href="class_c_ctl_mgr.html#a919fed66e32876bfba43d655c4302c00">00197</a>         <a class="code" href="struct_i_cipl_com_mgr.html">ICiplComMgr</a> *<a class="code" href="class_c_ctl_mgr.html#a919fed66e32876bfba43d655c4302c00">m_pComMgr</a>;
<a name="l00198"></a><a class="code" href="class_c_ctl_mgr.html#a929417481361c3a0f3ad9c7af336bae9">00198</a>         HINSTANCE <a class="code" href="class_c_ctl_mgr.html#a929417481361c3a0f3ad9c7af336bae9">m_hDLL</a>;
<a name="l00199"></a><a class="code" href="class_c_ctl_mgr.html#af0779272dbf535c55dd9ac7408388ef1">00199</a>         HANDLE <a class="code" href="class_c_ctl_mgr.html#af0779272dbf535c55dd9ac7408388ef1">m_hReady</a>;
<a name="l00200"></a>00200         <span class="comment">// critical section (1) must be obtained before accessing (2) and (2) must be released before (1)</span>
<a name="l00201"></a>00201         <span class="comment">//</span>
<a name="l00202"></a>00202         <span class="comment">// csCommand blocks out all external commands</span>
<a name="l00203"></a>00203         <span class="comment">//              with the exception of GetEnv/SetEnv, Register/Unregister, and CreateObject/SelectObject</span>
<a name="l00204"></a>00204         <span class="comment">//</span>
<a name="l00205"></a>00205         <span class="comment">// csInternal protects against session list/object and environment changes</span>
<a name="l00206"></a>00206         <span class="comment">// </span>
<a name="l00207"></a><a class="code" href="class_c_ctl_mgr.html#a82b0a94b3f0a0e29f5a2ef5eb77a5cba">00207</a>         CRITICAL_SECTION <a class="code" href="class_c_ctl_mgr.html#a82b0a94b3f0a0e29f5a2ef5eb77a5cba">m_csCommand</a>;   <span class="comment">// (1) will be held if an external command is encountered</span>
<a name="l00208"></a><a class="code" href="class_c_ctl_mgr.html#a21b54dad3cc912164a29045d2ae732c7">00208</a>         CRITICAL_SECTION <a class="code" href="class_c_ctl_mgr.html#a21b54dad3cc912164a29045d2ae732c7">m_csInternal</a>;  <span class="comment">// (2) will be held if session/object/environment list changes (but not function calls into session/objets)</span>
<a name="l00209"></a><a class="code" href="class_c_ctl_mgr.html#a793cc4f4ecf89166cf7ee2b4bade5456">00209</a>         std::list&lt;CIPL_NotifyItem&gt; <a class="code" href="class_c_ctl_mgr.html#a793cc4f4ecf89166cf7ee2b4bade5456">m_NotifyList</a>;
<a name="l00210"></a><a class="code" href="class_c_ctl_mgr.html#a80060fc5804d79155ccaa7ab3f176c3d">00210</a>         <a class="code" href="_ctl_mgr_8h.html#a8492f7115dbbb541387bbdc243d84a43">SessionList</a> <a class="code" href="class_c_ctl_mgr.html#a80060fc5804d79155ccaa7ab3f176c3d">m_SessionList</a>;
<a name="l00211"></a><a class="code" href="class_c_ctl_mgr.html#a17d5b53c955b74fa25ea078d5fdea8ed">00211</a>         TCHAR *<a class="code" href="class_c_ctl_mgr.html#a17d5b53c955b74fa25ea078d5fdea8ed">m_szDefaultSession</a>;
<a name="l00212"></a><a class="code" href="class_c_ctl_mgr.html#a089a61d7c236142a250b40380576a8a6">00212</a>         <a class="code" href="_ctl_mgr_8h.html#a0bb2d3d74e98715e05dd2c3f192772c4">EnvMap</a> <a class="code" href="class_c_ctl_mgr.html#a089a61d7c236142a250b40380576a8a6">m_EnvMap</a>;
<a name="l00213"></a><a class="code" href="class_c_ctl_mgr.html#a8cfee5eb8f683661b621bde429b475d7">00213</a>         TCHAR *<a class="code" href="class_c_ctl_mgr.html#a8cfee5eb8f683661b621bde429b475d7">m_szEventReturn</a>;
<a name="l00214"></a>00214 };
<a name="l00215"></a>00215 
<a name="l00216"></a>00216 <span class="preprocessor">#endif //_CTLMGR_H_</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Mon Oct 26 2015 10:59:07 for Cipl Simple API by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
